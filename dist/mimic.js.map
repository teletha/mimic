{"version":3,"file":"mimic.js","sources":["../src/mimic.js"],"sourcesContent":["/*\r\n * Copyright (C) 2021 Mimic Development Team\r\n *\r\n * Licensed under the MIT License (the \"License\");\r\n * you may not use this file except in compliance with the License.\r\n * You may obtain a copy of the License at\r\n *\r\n *          https://opensource.org/licenses/MIT\r\n */\r\n\r\n// ============================================================\r\n// Define constants and static functions to be used inside Mimic\r\n// ============================================================\r\nconst\r\n\r\n\t/**\r\n\t * It is a function that does not do anything.\r\n\t * \r\n\t * @type {Function<Any, Any>}\r\n\t */\r\n\tnoop = () => { },\r\n\r\n\t/**\r\n\t * Utility to determine if the input value is a string.\r\n\t *\r\n\t * @param {Object} A value to test.\r\n\t * @return {boolean} A result of test.\r\n\t */\r\n\tisString = value => typeof value === \"string\" || value instanceof String,\r\n\r\n\t/**\r\n\t * Utility to parse the input string as HTML.\r\n\t *\r\n\t * @param {String} HTML text to parse.\r\n\t * @return {DocumentFragment} A parsed HTML fragment.\r\n\t */\r\n\tparseHTML = text => {\r\n\t\tlet t = document.createElement(\"template\")\r\n\t\tt.innerHTML = text\r\n\t\tif (text.startsWith(\"<o-\")) Mimic(t.content).children().add(\"mimic\")\r\n\t\treturn t.content\r\n\t},\r\n\r\n\t/**\r\n\t * Get all elements obtained by iterating through the specified DOM operations on the obtained DOM elements.\r\n\t * If the result of the operation is null or the element matches the exit condition, the operation will end there.\r\n\t * \r\n\t * @param {HTMLElement} e The initial target element.\r\n\t * @param {Function<HTMLElement, HTMLElement>} action Your DOM traversal operation\r\n\t * @param {String | HTMLElement} [stopper = null] CSS selector or HTMLElement pointing to the end element. (Optional)\r\n\t * @return {HTMLElement[]} Set of DOM elements.\r\n\t */\r\n\tall = function*(e, action, stopper) {\r\n\t\tlet stop = stopper ? isString(stopper) ? e => e.matches(stopper) : e => e === stopper : e => false\r\n\t\twhile ((e = action(e)) && !stop(e)) yield e\r\n\t},\r\n\r\n\t/**\r\n\t * It is essentially the same as flatMap with the DOM traversal operation applied to the original HTMLElement set,\r\n\t * but provides additional element uniqueness for the resulting set and filtering effects with CSS selectors.\r\n\t * \r\n\t * @param {Function<HTMLElement, Iterable<HTMLElement>>} traverser Your DOM traversal operation\r\n\t * @param {int} [filterIndex = 0] Indicates the location of the CSS selector used for filtering. (Optional)\r\n\t * @return {Mimic} Set of DOM elements.\r\n\t */\r\n\tflat = (traverser, filterIndex = 0) =>\r\n\t\tfunction(...arg) {\r\n\t\t\tlet unique = [...new Set(this.nodes.flatMap(n => traverser(n, ...arg)))]\r\n\t\t\treturn Mimic(arg[filterIndex] ? unique.filter(e => e.matches(arg[filterIndex])) : unique)\r\n\t\t},\r\n\r\n\t/**\r\n\t * Performs processing on each HTML element with possible side-effects, and returns its value if it has a result, or itself if it does not.\r\n\t * \r\n\t * @param {Consumer<T> | Supplier<T>} action Your DOM operation.\r\n\t * @return {Mimic} Set of DOM elements.\r\n\t */\r\n\tself = action =>\r\n\t\tfunction(...arg) {\r\n\t\t\treturn Mimic(this.nodes.map(n => action(n, ...arg) || n))\r\n\t\t},\r\n\r\n\t/**\r\n\t * Set and retrieve the associated value for an HTML element.\r\n\t * \r\n\t * @param {Consumer<T> | Supplier<T>} action Your DOM operation.\r\n\t * @return {Mimic} Set of DOM elements.\r\n\t */\r\n\tvalue = action =>\r\n\t\tfunction(...arg) {\r\n\t\t\tif (typeof arg[0] == \"function\") {\r\n\t\t\t\tlet component = this.closest(\".mimic\").nodes[0]\r\n\t\t\t\tif (component) {\r\n\t\t\t\t\tlet info = component.mimic || (component.mimic = {})\r\n\t\t\t\t\tlet renders = info.renders || (info.renders = [])\r\n\t\t\t\t\trenders.push(arg[0])\r\n\t\t\t\t}\r\n\t\t\t\targ[0] = arg[0]()\r\n\t\t\t}\r\n\t\t\tlet result = this.nodes.map(n => action(n, ...arg))[0]\r\n\t\t\treturn result === undefined || result === arg[arg.length - 1] ? this : result\r\n\t\t},\r\n\r\n\t/**\r\n\t * It converts the specified values to HTML elements and performs DOM operations on those values.\r\n\t * \r\n\t * @param {Element | Text | ShadowRoot | Array | String | Mimic} v HTML convertible object.\r\n\t * @param {Consumer<HTMLElement>} action Your DOM operation.\r\n\t */\r\n\tnodify = (v, action) => {\r\n\t\tif (v instanceof Element || v instanceof Text || v instanceof ShadowRoot) {\r\n\t\t\taction(v)\r\n\t\t} else if (Array.isArray(v)) {\r\n\t\t\tv.forEach(i => nodify(i, action))\r\n\t\t} else if (isString(v)) {\r\n\t\t\taction(v.trim()[0] === \"<\" ? parseHTML(v) : $(v))\r\n\t\t} else if (v instanceof Mimic) {\r\n\t\t\tnodify(v.nodes, action)\r\n\t\t}\r\n\t}\r\n\r\n// ============================================================\r\n// Define Mimic\r\n// ============================================================\r\n/*\r\n * The single entry point for Mimic.\r\n * This is a class, although it is not defined using the class syntax because it is supposed to be called as a function without the new operator.\r\n * This is something like a monad that can handle a group of recognizable HTML elements such as string, CSS selector, Node or its array.\r\n */\r\nexport function Mimic(query) {\r\n\tlet o = Object.create(this ? this.constructor.prototype : Mimic.prototype)\r\n\to.nodes = isString(query) ? [...(query.trim()[0] === \"<\" ? parseHTML(query).children : document.querySelectorAll(query))]\r\n\t\t: Array.isArray(query) ? query\r\n\t\t\t: !query ? [document]\r\n\t\t\t\t: query instanceof Node ? [query]\r\n\t\t\t\t\t: query instanceof Mimic ? [...query.nodes]\r\n\t\t\t\t\t\t: /* query instanceof NodeList || query instanceof HTMLCollection ? */[...query]\r\n\treturn o\r\n}\r\n\r\nMimic.prototype = {\r\n\teach: self((e, action) => action(e)),\r\n\r\n\tcontain: flat((e, selector) => e.querySelector(selector) ? e : [], 9),\r\n\tfilter: flat((e, condition) => condition(e) ? e : [], 9),\r\n\tis: flat((e, selector) => e.matches(selector) ? e : [], 9),\r\n\r\n\tparent: flat(e => e.parentNode),\r\n\tparents: flat(e => [...all(e, x => x.parentElement)]),\r\n\tclosest: self((e, selector) => e.closest(selector)),\r\n\tchildren: flat(e => [...e.children]),\r\n\tfind: flat((e, selector) => [...e.querySelectorAll(selector)], 9),\r\n\tfirst: flat(e => e.firstElementChild),\r\n\tlast: flat(e => e.lastElementChild),\r\n\tprev: flat(e => e.previousElementSibling),\r\n\tprevs: flat(e => [...all(e, x => x.previousElementSibling)]),\r\n\tprevUntil: flat((e, selectorOrElement) => [...all(e, x => x.previousElementSibling, selectorOrElement)], 1),\r\n\tnext: flat(e => e.nextElementSibling),\r\n\tnexts: flat(e => [...all(e, x => x.nextElementSibling)]),\r\n\tnextUntil: flat((e, selectorOrElement) => [...all(e, x => x.nextElementSibling, selectorOrElement)], 1),\r\n\r\n\tappend: self((e, node) => nodify(node, n => e.append(n))),\r\n\tappendTo: self((e, node) => nodify(node, n => n.append(e))),\r\n\tprepend: self((e, node) => nodify(node, n => e.prepend(n))),\r\n\tprependTo: self((e, node) => nodify(node, n => n.prepend(e))),\r\n\tbefore: self((e, node) => nodify(node, n => e.before(n))),\r\n\tinsertBefore: self((e, node) => nodify(node, n => n.before(e))),\r\n\tafter: self((e, node) => nodify(node, n => e.after(n))),\r\n\tinsertAfter: self((e, node) => nodify(node, n => n.after(e))),\r\n\tclone: self(e => e.cloneNode()),\r\n\tmake: flat((e, name, items, action) => action ? items.map(item => { let dom = Mimic(e).make(name).model(item); action(item, dom); return dom }).flatMap(e => e.nodes) : e.appendChild(document.createElement(name)), 9),\r\n\tsvg: flat((e, path) => e.appendChild(Mimic(`<svg class='svg ${path.substring(path.indexOf(\"#\") + 1)}' viewBox='0 0 24 24'><use href='${path}'/></svg>`).nodes[0]), 9),\r\n\r\n\tempty: self(e => e.replaceChildren()),\r\n\tclear: self(e => e.parentNode.removeChild(e)),\r\n\r\n\thtml: value((e, text) => text ? e.innerHTML = text : e.innerHTML),\r\n\ttext: value((e, text) => text ? e.textContent = text : e.textContent),\r\n\tattr: value((e, name, value) => value ? e.setAttribute(name, value) : e.getAttribute(name)),\r\n\tdata: value((e, name, value) => value ? e.dataset[name] = value : e.dataset[name]),\r\n\tcss: self((e, style) => isString(style) ? e.style.cssText = style : Object.keys(style).forEach(name => e.style[name] = style[name])),\r\n\tmodel: value((e, value) => value !== undefined ? e.model = value : e.model),\r\n\tvalue: value((e, value) => value !== undefined ? e.value = value : e.value),\r\n\ttoString: value(e => e.outerHTML),\r\n\r\n\tadd: value((e, name) => e.classList.add(name)),\r\n\tremove: value((e, name) => e.classList.remove(name)),\r\n\ttoggle: value((e, name, addAction = noop, removeAction = noop) => e.classList.toggle(name) ? addAction() : removeAction()),\r\n\thas: value((e, name) => e.classList.contains(name)),\r\n\tset: value((e, nameAndCondition) => Object.keys(nameAndCondition).forEach(name => e.classList[nameAndCondition[name] ? \"add\" : \"remove\"](name))),\r\n\treset: value((e, name) => e.className = (name || \"\")),\r\n\r\n\t// In cases where event listeners are registered during event processing, we delay the registration of all event listeners\r\n\t// because it may cause an infinite loop or supplement the event at an unintended timing.\r\n\ton: value((e, type, listener, options) => { activatable(e, type); setTimeout(() => e.addEventListener(type, options?.where ? event => event.target.matches(options.where + \",\" + options.where + \" *\") ? listener(event) : null : listener, options), 0) }),\r\n\toff: value((e, type, listener) => e.removeEventListener(type, listener)),\r\n\tdispatch: self((e, type) => e.dispatchEvent(new Event(type, { bubbles: true }))),\r\n\r\n\tshow: self((e, show) => e.style.display = show ? \"\" : \"none\"),\r\n}\r\n\r\n\"blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change input select submit keydown keypress keyup contextmenu\".split(\" \").forEach(type => {\r\n\tMimic.prototype[type] = function(listener, options) { return this.on(type, listener, options) }\r\n})\r\n\"id title href placeholder label name src type\".split(\" \").forEach(type => {\r\n\tMimic.prototype[type] = function(value) { return this.attr(type, value) }\r\n})\r\n\r\n\r\nfunction activatable(element, type) {\r\n\tif (element.closest) {\r\n\t\tlet component = element.closest(\".mimic\")\r\n\t\tif (component) {\r\n\t\t\tlet info = component.mimic || (component.mimic = {})\r\n\t\t\tlet count = ++info[type] || (info[type] = 1)\r\n\t\t\tif (count === 1) component.addEventListener(type, e => {\r\n\t\t\t\tconsole.log(\"need redraw \", component, e, info)\r\n\t\t\t\tinfo.renders?.forEach(render => render())\r\n\t\t\t})\r\n\t\t}\r\n\t}\r\n}\r\n\r\n"],"names":["value","e"],"mappings":"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"}