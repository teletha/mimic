var _a;class Flash{constructor(){let e;this.cache=new Map,this.parser=new DOMParser,"scrollRestoration"in history&&(history.scrollRestoration="manual",history.replaceState(this.data(),"")),document.addEventListener("click",e=>{var t;const a=e.target.closest("a");if(!a||a.origin!==location.origin||a.target||e.ctrlKey||e.metaKey||e.altKey||e.shiftKey||a.hasAttribute("data-no-swup"))return;e.preventDefault();const n=new URL(window.location.href),o=new URL(a.href);if(n.pathname!==o.pathname||n.search!==o.search)history.replaceState(this.data(),""),history.pushState(this.data(0),"",o.pathname+o.search+o.hash),this.transit(a.href,null);else if(n.hash!==o.hash){history.replaceState(this.data(),"",a.href);const e=o.hash.slice(1);e&&(null==(t=document.getElementById(e))||t.scrollIntoView())}}),window.addEventListener("popstate",e=>{var t;this.transit(location.href,(null==(t=e.state)?void 0:t.scroll)??0)}),window.addEventListener("scroll",()=>{clearTimeout(e),e=setTimeout(()=>{history.replaceState(this.data(),"")},100)},{passive:!0}),this.applyPrefetch(document)}data(e=window.scrollY){return{scroll:e}}async transit(e,t){document.documentElement.classList.add("is-leaving");const a=new Promise(e=>setTimeout(e,120));try{const[n,o]=await Promise.all([a,this.fetchPage(e)]);this.render(o,t)}catch(t){return void(window.location.href=e)}document.documentElement.classList.remove("is-leaving"),document.dispatchEvent(new CustomEvent("swup:page:view"))}render(e,t){const a=this.parser.parseFromString(e,"text/html");this.updateHead(a.head);const n=a.querySelector("main"),o=document.querySelector("main");if(n&&o&&(o.innerHTML=n.innerHTML,this.runMainScripts(o)),"number"==typeof t)window.scrollTo(0,t);else{const e=window.location.hash,t=e?e.slice(1):null,a=t?document.getElementById(t):null;a?a.scrollIntoView():window.scrollTo(0,0)}this.applyPrefetch(o)}updateHead(e){var t;document.title=(null==(t=e.querySelector("title"))?void 0:t.innerText)||"",document.head.querySelectorAll("meta").forEach(e=>e.remove()),e.querySelectorAll("meta").forEach(e=>{document.head.appendChild(e.cloneNode(!0))});const a=Array.from(e.querySelectorAll("link, style")),n=Array.from(document.head.querySelectorAll("link, style")),o=e=>"LINK"===e.tagName?e.href:e.textContent;a.forEach(e=>{const t=o(e),a=n.find(e=>o(e)===t);a?a._keep=!0:document.head.appendChild(e.cloneNode(!0))}),n.forEach(e=>{e._keep?delete e._keep:e.remove()})}runMainScripts(e){e.querySelectorAll("script").forEach(e=>{const t=document.createElement("script");Array.from(e.attributes).forEach(e=>{t.setAttribute(e.name,e.value)}),t.textContent=e.textContent,e.parentNode.replaceChild(t,e)})}async fetchPage(e){const t=new URL(e,window.location.href);if(e=t.origin+t.pathname,this.cache.has(e))return this.cache.get(e);const a=await fetch(e);if(!a.ok)throw new Error("Network error");const n=await a.text();return this.cache.set(e,n),n}applyPrefetch(e){e.querySelectorAll("a").forEach(e=>{e.origin!==location.origin||e.hasAttribute("data-no-swup")||(e.addEventListener("mouseenter",()=>this.fetchPage(e.href),{once:!0}),e.addEventListener("touchstart",()=>this.fetchPage(e.href),{once:!0,passive:!0}))})}}new Flash;const beacon=null==(_a=document.currentScript)?void 0:_a.dataset.cfBeacon;if(beacon){const e="initcfb",t=window.location.pathname;history.replaceState({},"",t+e);const a=XMLHttpRequest.prototype,n=a.send;a.send=function(o){return(null==o?void 0:o.includes(e))&&(setTimeout(()=>history.replaceState({},"",t)),a.send=n,o=o.replaceAll(e,"")),n.apply(this,[o])};const o=navigator.sendBeacon;navigator.sendBeacon=async function(t,a){return a instanceof Blob&&(a=new Blob([(await a.text()).replaceAll(e,"")],{type:a.type})),o.apply(this,[t,a])};const r=document.createElement("script");r.dataset.cfBeacon=beacon,r.src="https://static.cloudflareinsights.com/beacon.min.js",document.body.appendChild(r)}
